API 设计
* 简单原则：持久性和稳定性是已发布 API 的重要特征
* 如果 API 的接口无论如何都改变了，API 提供者不可能改变所有使用该 API 的应用程序，而强制所有消费者调整或更新他们的应用程序也是同样不切实际的。
* API 需要保持向后兼容，这样老客户端就不会崩溃，新客户端就可以使用新的和改进的特性。

API 潜在的修改及分类
* 向后兼容的修改
  * 增加查询参数，他们总是可选的
  * 增加请求头或表单参数，如果是可选的话
  * 增加 JSON 数据结构字段，如果是可选的话
  * 新增资源地址
  * 已有资源新增动作
  * 将现有 API 中的强制字段更改为可选字段
* 不兼容修改：如果需要进行更改，则必须创建 API 的新附加版本，该版本与现有 API 版本并行存在。**建议只执行非破坏性的更改，即添加性更改。**
  * 删除或修改数据结构
  * 请求或响应移除了字段
  * 将主体或参数中以前可选的请求字段更改为强制字段
  * 将主体或参数中以前必需的响应字段更改为可选字段
  * 修改资源 URI 地址
  * 向数据结构添加新的强制字段
* 版本控制 - Accept Header
  * 可以在 Accept Header 中显式地指示 API 的版本，API 的 URI 不包含任何版本信息，对于新版而已，URL 并没有发生改变
  * 建议不要引入默认版本，客户端必须总是指明版本。这种强制性版本控制要求从发布 API 的第一个版本开始就引入版本控制。
* 版本控制 - URI Path Parameter
  * 在 URI 路径中引入版本参数
  * 优点是广泛使用和浏览器兼容性。不同的版本可以通过浏览器探索。
* 版本控制 - Custom HTTP Header
  * 这种方法可能会导致缓存问题。不推荐使用此方法。
* 版本控制 - 查询参数
  * 不推荐使用
* 版本控制 - 新的子域名
  * 比如 v1.domain.com
  * 不推荐使用

## RESTful
基础约定
* 接口路径以 /api 或 /[version]/api 开头
* 接口路径使用资源名词而非动词，动作应由 HTTP Method 体现
* 接口路径中的资源使用复数而非单数
* 接口设计面向开放接口，而非单纯前端业务
* 规范使用 HTTP 方法
  * GET 获取数据
  * POST 创建数据
  * PATCH 差量修改数据
  * PUT 全量修改数据
  * DELETE 删除数据
* 规范使用 HTTP 状态吗
  * 200 创建成功，通常用在同步操作
  * 202 创建成功，通常用在异步操作时，表示请求已接受，但没有处理完成
  * 400 参数错误，通常用在表单参数错误
  * 401 授权错误，token 缺失或失效，通常前端会跳转到登录页
  * 403 操作被拒绝，权限不足
  * 404 没有找到对象，通常发生在使用错误的 id
  * 500 服务器错误
* 基础外层数据结构
  * code 业务编码，帮助定位问题
  * status HTTP 响应状态码
  * message
  * data
* 常见业务字段约定
  * 名称 name
  * 状态 status
  * 创建时间 created_at
  * 更新事件 updated_at
  * 空数组使用 []，而不是 null

具体接口
* 创建完成后直接返回 id
* 排序使用 sort 和 order
* 分页使用 page 和 per_page
* 普通筛选使用键值对，多列模糊查询使用 keyword，枚举筛选使用数据合并拼接，如 status=pending,complete，区间使用 xxx_lt 和 xxx_gt 关键词
* 尽可能返回所有关联数据展开详情，便于客户端显示
* 合理自然嵌套结构而不是平铺
* 删除接口应酌情提供批量删除
* 统一提供单文件上传接口（/api/files），支持上传所有类型文件
* 统一提供多文件上传接口（/api/multiple-files），支持上传所有类型文件
* 文件路径至少补全至根路径，而不是交由前端去拼接
* 涉及到用户隐私的应对相关字段做加密处理