## 单元测试与重构
之前一直在想，单元测试有什么作用，写那么一些很明显的断言干嘛呢？浪费我时间，我自己直接跑一下不就好了么。

今天（2018/8/20）看到这篇公众号，再加上最近后台发生的一次线上事故，我似乎就有了新的理解。

单元测试对于程序员来说，就是一个防护网，能让你有信心开发新的特性而不破坏现有的实现。同时良好的单元测试，还能帮助别的程序员理解你的代码。

如果一个功能相比而言比较复杂，你当初开发的时候，可能比较清楚，可是如果后来人接管你的代码，并且需要进行迭代呢？因为他不了解你当初实现的所有细节，就非常有可能写出bug。

> 单元测试，不仅是为了当时开发时的测试，更是为了日后自己和他人迭代代码时给予信心

对于一个有追求的团队，对于一个持续维护一个正经应用的团队，单元测试都是必备的，同时对于一个有追求的程序员，单元测试都是必备的

重构要求在不破坏原有代码的功能的情况下对代码进行改动，让它变得更好，没有单元测试是很难的

推荐书籍
* 《修改代码的艺术》
* 《重构-改善既有代码的设计》

## 编程难在哪里
* 做出来容易，做正确难，这里的正确不是指功能正确，而是程序容易理解
* 编程是一种沟通，沟通是一种艺术，用程序跨越时空之沟通则是一门属于程序员的特有的艺术
* 坏的决定会导致坏的决定，甚至导致人们去扭曲一个好的决定去迎合坏的决定。垃圾会制造垃圾，一个放在系统里不经常清理的额外复杂度，会导致更多的额外复杂度的生成
* 每个人甚至同一个人的不同时刻都有自己的不同的知道额外复杂度的缺陷

> 人与文化，决定了什么人留在这里，什么人离开，什么人吸引什么人，什么人成长成什么样的人。

## Elasticsearch诞生
模糊查询，SQL like存在的问题
* 数据量大时，效率十分低
* 模糊程度不高

inverted index：倒排索引
* 拆词
* 去除查询无关词
* 针对单词：复数单词，过去式单词还原
* 忽略大小写
* 记录出现次数和位置

关键字组合搜索

Lucene -> Compass -> Elasticsearch